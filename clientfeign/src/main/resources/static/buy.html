<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}" media="all">
</head>
<body>

<div class="layui-container" style="width: 700px;height: 600px;margin-top: 0px;padding-top: 60px;">

    <div style="margin-left: 460px; width: 200px;">
<!--        href="/menu/redirect/order"-->
<!--        欢迎回来！<a  th:text="${session.user.nickname}"></a>-->
    </div>

    <table class="layui-hide" id="test" lay-filter="test"></table>
    <script type="text/html" id="barDemo">
        <a class="layui-btn layui-btn-xs" lay-event="seatChoose" onclick="refurbishIndex()">订购</a>
    </script>
<!--    <script type="text/javascript">-->

<!--        $(function () {-->
<!--            refurbishIndex();-->
<!--        })-->

<!--        function refurbishIndex(){-->
<!--            $.ajax({-->
<!--                //改-->
<!--                type:"get",-->
<!--                url:"/list",-->
<!--                data:{},-->
<!--                async: false,-->
<!--                success:function (data) {-->
<!--                    var str="";-->
<!--                    for (i in data) {-->
<!--                        str += "<tr>" +-->
<!--                            "<td>"+"<input type=\"checkbox\" />"+"</td>"+-->
<!--                            "<td align='center'>" + data[i].id + "</td>" +-->
<!--                            "<td align='center'>" + data[i].command + "</td>" +-->
<!--                            "<td align='center'>" + data[i].description + "</td>" +-->
<!--                            "<td>\n" +-->
<!--                            "<a href=\"#\">修改</a>\n" +-->
<!--                            "<a href=\"#\">删除</a>\n" +-->
<!--                            "</td>"-->
<!--                        "</tr>";-->
<!--                    }-->

<!--                    document.getElementById("tbodydata").innerHTML=str;-->

<!--                }-->
<!--            });-->
<!--        }-->
<!--    </script>-->
    <script th:src="@{/layui/layui.js}" charset="utf-8"></script>
    <script>
        layui.use('table', function(){
            var table = layui.table;

            table.render({
                elem: '#test'
                ,url:'/movie/findAll'
                ,title: '菜单列表'
                ,cols: [
                    [
                        {field:'id', width:40, title: '编号', sort: true}
                        ,{field:'movieName', width:100, title: '电影名称'}
                        ,{field:'picture', width:100, title: '海报'}
                        ,{field:'sort', width:40, title: '电影类型'}
                        ,{field:'director', width:100, title: '导演'}
                        ,{field:'role', width:100, title: '主演'}
                        ,{field:'releaseDate', width:100, title: '上映日期'}
                        ,{field:'length', width:100, title: '片长'}
                        ,{field:'preview', width:40, title: '预告'}
                        ,{field:'session', width:100, title: '场次'}
                        ,{field:'no', width:100, title: '影厅号'}
                        ,{field:'cinemaName', width:100, title: '电影院名称'}
                        ,{field:'price', width:40, title: '价格'}
                        ,{field:'numberOfSeat', width:100, title: '座位总数'}
                        ,{field:'numberOfAvail', width:100, title: '座位余数'}
                        ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:140}
                    ]
                ]
                ,page: true
            });

            // //监听行工具事件
            // table.on('tool(test)', function(obj){
            //     var data = obj.data;
            //     if(obj.event === 'order'){
            //         window.location.href="/order/save/"+data.id;
            //     }
            // });
            table.on('tool(test)', function(obj){
                var data = obj.data;
                if(obj.event === 'seatChoose'){
                    window.location.href="seatChoose?id="+data.id;
                }
            });
        });
    </script>

</div>
<script>
    //二级菜单联动
    layui.use('element', function(){
        var element = layui.element;

    });
</script>
</body>
</html>



